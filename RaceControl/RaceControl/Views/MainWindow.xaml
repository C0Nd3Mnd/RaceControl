<Window
    x:Class="RaceControl.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:prism="http://prismlibrary.com/"
    Title="{Binding Title}"
    Width="1150"
    Height="800"
    prism:ViewModelLocator.AutoWireViewModel="True">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadedCommand}" PassEventArgsToCommand="True" />
        </i:EventTrigger>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding ClosingCommand}" PassEventArgsToCommand="False" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid Margin="2">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Label
            Grid.Row="0"
            Grid.Column="0"
            Margin="2"
            Background="LightGray"
            Content="Seasons"
            FontWeight="Bold" />
        <ListView
            Grid.Row="1"
            Grid.Column="0"
            Margin="2"
            ItemsSource="{Binding Seasons}"
            SelectedItem="{Binding SelectedSeason}"
            SelectionMode="Single">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding SeasonSelectionChangedCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListView>
        <Label
            Grid.Row="0"
            Grid.Column="1"
            Margin="2"
            Background="LightGray"
            Content="Events"
            FontWeight="Bold" />
        <ListView
            Grid.Row="1"
            Grid.Column="1"
            Margin="2"
            ItemsSource="{Binding Events}"
            SelectedItem="{Binding SelectedEvent}"
            SelectionMode="Single">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding EventSelectionChangedCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListView>
        <Grid
            Grid.Row="0"
            Grid.RowSpan="2"
            Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="28" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Label
                Grid.Row="0"
                Margin="2"
                Content="Live Now"
                FontWeight="Bold">
                <Label.Style>
                    <Style TargetType="Label">
                        <Setter Property="Background" Value="LightGray" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding HasItems, ElementName=lvLiveSessions}" Value="True">
                                <Setter Property="Background" Value="LightGreen" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>
            </Label>
            <ListView
                x:Name="lvLiveSessions"
                Grid.Row="1"
                Margin="2"
                ItemsSource="{Binding LiveSessions}"
                SelectedItem="{Binding SelectedSession}"
                SelectionMode="Single">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="SelectionChanged">
                        <i:InvokeCommandAction Command="{Binding SessionSelectionChangedCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </ListView>
            <Label
                Grid.Row="2"
                Margin="2"
                Background="LightGray"
                Content="Sessions"
                FontWeight="Bold" />
            <ListView
                Grid.Row="3"
                Margin="2"
                ItemsSource="{Binding Sessions}"
                SelectedItem="{Binding SelectedSession}"
                SelectionMode="Single">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="SelectionChanged">
                        <i:InvokeCommandAction Command="{Binding SessionSelectionChangedCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </ListView>
        </Grid>
        <Label
            Grid.Row="0"
            Grid.Column="3"
            Margin="2"
            Background="LightGray"
            Content="Channels"
            FontWeight="Bold" />
        <ListView
            Grid.Row="1"
            Grid.Column="3"
            Margin="2"
            HorizontalContentAlignment="Stretch"
            ItemsSource="{Binding Channels}"
            SelectionMode="Single">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding}" />
                        <Button
                            Grid.Column="1"
                            Width="50"
                            Command="{Binding DataContext.WatchChannelCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}}"
                            CommandParameter="{Binding}"
                            Content="Watch" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Label
            Grid.Row="2"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="2"
            Background="LightGray"
            Content="Video On Demand"
            FontWeight="Bold" />
        <ListView
            Grid.Row="3"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="2"
            ItemsSource="{Binding VodTypes}"
            SelectedItem="{Binding SelectedVodType}"
            SelectionMode="Single">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding VodTypeSelectionChangedCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListView>
        <Label
            Grid.Row="2"
            Grid.Column="2"
            Grid.ColumnSpan="2"
            Margin="2"
            Background="LightGray"
            Content="Episodes"
            FontWeight="Bold" />
        <ListView
            Grid.Row="3"
            Grid.Column="2"
            Grid.ColumnSpan="2"
            Margin="2"
            HorizontalContentAlignment="Stretch"
            ItemsSource="{Binding Episodes}"
            SelectionMode="Single">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding}" />
                        <Button
                            Grid.Column="1"
                            Width="50"
                            Command="{Binding DataContext.WatchEpisodeCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}}"
                            CommandParameter="{Binding}"
                            Content="Watch" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window>